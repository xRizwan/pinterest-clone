(this["webpackJsonppinterest-clone"]=this["webpackJsonppinterest-clone"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.2ef023c4.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,function(e,t,a){},,,,function(e,t,a){e.exports=a.p+"static/media/github-logo.db8e55d7.png"},function(e,t,a){e.exports=a(93)},,,,,function(e,t,a){},,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/1.b047be5e.jpg"},function(e,t,a){e.exports=a.p+"static/media/2.e1c6b8df.jpg"},function(e,t,a){e.exports=a.p+"static/media/3.673f8e5b.jpg"},function(e,t,a){e.exports=a.p+"static/media/4.051a1f9b.jpg"},function(e,t,a){e.exports=a.p+"static/media/5.388508d3.jpg"},function(e,t,a){e.exports=a.p+"static/media/6.1df8e185.jpg"},function(e,t,a){e.exports=a.p+"static/media/7.051a1f9b.jpg"},function(e,t,a){e.exports=a.p+"static/media/1.436db242.jpg"},function(e,t,a){e.exports=a.p+"static/media/2.c90b145c.jpg"},function(e,t,a){e.exports=a.p+"static/media/3.f36af292.jpg"},function(e,t,a){e.exports=a.p+"static/media/4.a5f61f72.jpg"},function(e,t,a){e.exports=a.p+"static/media/5.4dbab528.jpg"},function(e,t,a){e.exports=a.p+"static/media/6.66848e65.jpg"},function(e,t,a){e.exports=a.p+"static/media/7.c9172389.jpg"},function(e,t,a){e.exports=a.p+"static/media/1.3f531bbe.jpg"},function(e,t,a){e.exports=a.p+"static/media/2.4bb34761.jpg"},function(e,t,a){e.exports=a.p+"static/media/3.ad68e2cf.jpg"},function(e,t,a){e.exports=a.p+"static/media/4.a53f486a.jpg"},function(e,t,a){e.exports=a.p+"static/media/5.e5dce415.jpg"},function(e,t,a){e.exports=a.p+"static/media/6.7700c65c.jpg"},function(e,t,a){e.exports=a.p+"static/media/7.eece83c3.jpg"},function(e,t,a){e.exports=a.p+"static/media/1.6e0bdcce.jpg"},function(e,t,a){e.exports=a.p+"static/media/2.433c7d12.jpg"},function(e,t,a){e.exports=a.p+"static/media/3.8973b91d.jpg"},function(e,t,a){e.exports=a.p+"static/media/4.6b0882f4.jpg"},function(e,t,a){e.exports=a.p+"static/media/5.fd6da5c0.jpg"},function(e,t,a){e.exports=a.p+"static/media/6.05005ecb.jpg"},function(e,t,a){e.exports=a.p+"static/media/7.67358dae.jpg"},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(16),r=a.n(l),o=(a(47),a(2)),s=a(8),i=a(12),m=a(6),u=a(4),d=a(3),f=function(e){return{type:"SETTARGET",payload:e}},g=function(e){return{type:"SET_USER",payload:e}},b=(a(34),a(7)),E=a.n(b),h=a(1),v=(a(36),a(53),a(94),h.initializeApp({apiKey:"AIzaSyCalm9N86_5dsMM1Nc5Asi2d4V6EhuHZyw",authDomain:"xpinterest-clone.firebaseapp.com",databaseURL:"https://xpinterest-clone.firebaseio.com",projectId:"xpinterest-clone",storageBucket:"xpinterest-clone.appspot.com",messagingSenderId:"267519282006",appId:"1:267519282006:web:a09a0a07bd59313c4464f7",measurementId:"G-7XT73EPBH3"})),p=v.auth(),N=new h.auth.GoogleAuthProvider,w=v.firestore(),j=new Date,O={signupEmail:"",signupPassword:"",age:"",loginEmail:"",loginPassword:"",signupErr:"",loginErr:""};function C(e,t){var a=t.field,n=t.value;return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},a,n))}var y=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useState)(!1),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(!1),f=Object(o.a)(i,2),g=f[0],b=f[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),x=y[0],k=y[1],S=Object(n.useState)(!1),L=Object(o.a)(S,2),I=L[0],P=L[1],T=Object(d.c)((function(e){return e.isLogged})),R=Object(d.b)();Object(n.useEffect)((function(){var t=function(){window.innerWidth>589&&e.current.classList.add("hide")};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var U=function(){k(!0),b(!0)},A=function(){k(!0),s(!0)},_=function(){k(!1),b(!1),s(!1)},F=Object(n.useReducer)(C,O),D=Object(o.a)(F,2),B=D[0],G=D[1],M=function(e){G({field:e.target.name,value:e.target.value})},z=B.signupEmail,W=B.signupPassword,V=B.age,Y=B.loginEmail,q=B.loginPassword,X=B.signupErr;return B.loginErr,c.a.createElement(c.a.Fragment,null,T?c.a.createElement(m.a,{to:"/main"}):"",c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper white"},c.a.createElement("div",{className:"left brand-logo red-text text-darken-2"},c.a.createElement("img",{src:E.a,alt:"logo",className:"logo"}),"Pinterest"),c.a.createElement("div",{className:"right hide-on-med-and-up black-text"},c.a.createElement("div",{className:"mobile-trigger",onClick:function(t){var a=t.target.parentElement.parentElement.parentElement;e.current.classList.contains("hide")?(e.current.classList.remove("hide"),e.current.classList.add("animate"),a.classList.remove("white"),a.style.backgroundColor="#f3f3f3"):(e.current.classList.add("hide"),a.classList.add("white"))}},c.a.createElement("i",{className:"material-icons"},"menu"))),c.a.createElement("div",{className:"right hide-on-small-only"},c.a.createElement("ul",{className:"nav-links"},c.a.createElement("li",{className:"nav-link link1"},c.a.createElement(u.b,{className:"black-text",to:"/about"},"About")),c.a.createElement("li",null,c.a.createElement("button",{className:"nav-link login-btn",onClick:A},"Log-In")),c.a.createElement("li",null,c.a.createElement("button",{className:"nav-link signup-btn",onClick:U},"Sign-Up")))),c.a.createElement("br",null),c.a.createElement("div",{ref:e,className:"black-text nav-list hide"},c.a.createElement(u.b,{className:"black-text",to:"/about"},c.a.createElement("div",{className:"list-item"},"About")),c.a.createElement("div",{className:"list-item",onClick:A},"LogIn"),c.a.createElement("div",{className:"list-item",onClick:U},"SignUp")))),c.a.createElement("div",{ref:t,className:"info-modal hide"},c.a.createElement("p",{className:"info-text"},"Success")),c.a.createElement("div",{className:"overlay ".concat(x?"":"hide")}),c.a.createElement("div",{className:"form-modal headings ".concat(g?"":"hide")},c.a.createElement("div",{className:"right"},c.a.createElement("i",{className:"material-icons black-text close",onClick:_},"close")),c.a.createElement("div",{className:"center"},c.a.createElement("img",{className:"modal-logo",alt:"logo",src:E.a}),c.a.createElement("h4",{className:"heading-text"},"Welcome to Pinterest"),c.a.createElement("p",{className:"subheading-text"},"Find new ideas to try")),c.a.createElement("div",{className:"center offset-top red-text\n                    ".concat(""!==X?"":"hide")},X),c.a.createElement("form",{className:"form-control"},c.a.createElement("div",{className:"input-control"},c.a.createElement("i",{className:"material-icons prefix"},"email"),c.a.createElement("div",{className:"center input-field"},c.a.createElement("input",{name:"signupEmail",type:"email",placeholder:"Email",value:z,onChange:M}))),c.a.createElement("br",null),c.a.createElement("div",{className:"input-control"},c.a.createElement("i",{className:"material-icons prefix"},"info"),c.a.createElement("div",{className:"center input-field"},c.a.createElement("input",{name:"signupPassword",type:"text",placeholder:"Password",onChange:M,value:W}))),c.a.createElement("div",{className:"input-control"},c.a.createElement("i",{className:"material-icons prefix"},"account_box"),c.a.createElement("div",{className:"center input-field"},c.a.createElement("input",{name:"age",type:"number",placeholder:"Age",value:V,onChange:M}))),c.a.createElement("div",{className:"center"},c.a.createElement("button",{className:"button",onClick:function(e){e.preventDefault(),""!==z&&z.includes("@")&&z.includes(".com")?W.length<8?G({field:"signupErr",value:"Password Must Be More Than 7 Letters"}):""!==V?(G({field:"signupErr",value:""}),P(!0),p.createUserWithEmailAndPassword(z,W).then((function(e){var t=e.user.uid;w.collection("users").doc(t).set({age:V,username:t}).then((function(){}))})).catch((function(e){return function(){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}}))):G({field:"signupErr",value:"Please Enter Your Age"}):G({field:"signupErr",value:"Please Enter a Valid Email"})}},"Continue"))),c.a.createElement("div",{className:"center"},c.a.createElement("p",{className:"subheading-text bold-weight"},"OR")),c.a.createElement("div",{className:"center"},c.a.createElement("button",{onClick:function(){P(!0);var e=new h.auth.FacebookAuthProvider;e.addScope("user_birthday"),p.signInWithPopup(e).then((function(e){var t=e.additionalUserInfo.profile.birthday,a=t.substr(t.length-4,t.length),n=j.getFullYear()-a,c=e.user.uid;w.collection("users").doc(c).set({age:n,username:c},{merge:!0})})).catch((function(e){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}))},className:"fake-button fb-btn"},c.a.createElement("i",{className:"material-icons white-text social-icon"},"menu"),c.a.createElement("span",null,"Continue with Facebook"))),c.a.createElement("div",{className:"center"},c.a.createElement("button",{className:"fake-button gg-btn",onClick:function(e){P(!0),p.signInWithPopup(N).then((function(e){var t=e.user.uid;w.collection("users").doc(t).set({username:t},{merge:!0}).then((function(){}))})).catch((function(e){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}))}},c.a.createElement("i",{className:"material-icons black-text social-icon"},"menu"),c.a.createElement("span",null,"Continue with Google"))),c.a.createElement("div",{className:"center offset-top"},c.a.createElement("p",{className:"subheading-text link bold-weight",onClick:function(){_(),A()}},"Already a Member? Log In"))),c.a.createElement("div",{className:"form-modal login-modal headings ".concat(r?"":"hide")},c.a.createElement("div",{className:"right"},c.a.createElement("i",{className:"material-icons black-text close",onClick:_},"close")),c.a.createElement("div",{className:"center"},c.a.createElement("img",{className:"modal-logo",alt:"logo",src:E.a}),c.a.createElement("h4",{className:"heading-text"},"Welcome to Pinterest"),c.a.createElement("p",{className:"subheading-text"},"Find new ideas to try")),c.a.createElement("div",{className:"center offset-top red-text hide"}),c.a.createElement("form",{className:"form-control"},c.a.createElement("div",{className:"input-control"},c.a.createElement("i",{className:"material-icons prefix"},"email"),c.a.createElement("div",{className:"center input-field"},c.a.createElement("input",{name:"loginEmail",value:Y,type:"email",placeholder:"Email",onChange:M}))),c.a.createElement("br",null),c.a.createElement("div",{className:"input-control"},c.a.createElement("i",{className:"material-icons prefix"},"info"),c.a.createElement("div",{className:"center input-field"},c.a.createElement("input",{name:"loginPassword",value:q,type:"text",placeholder:"Password",onChange:M}))),c.a.createElement("div",{className:"center"},c.a.createElement("button",{className:"button",onClick:function(e){e.preventDefault(),P(!0),p.signInWithEmailAndPassword(Y,q).then((function(){})).catch((function(e){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}))}},"Login"))),c.a.createElement("div",{className:"center"},c.a.createElement("p",{className:"subheading-text bold-weight"},"OR")),c.a.createElement("div",{className:"center"},c.a.createElement("button",{onClick:function(){P(!0);var e=new h.auth.FacebookAuthProvider;e.addScope("user_birthday"),p.signInWithPopup(e).then((function(e){var t=e.additionalUserInfo.profile.birthday,a=t.substr(t.length-4,t.length),n=j.getFullYear()-a,c=e.user.uid;w.collection("users").doc(c).set({age:n},{merge:!0})})).catch((function(e){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}))},className:"fake-button fb-btn"},c.a.createElement("i",{className:"material-icons white-text social-icon"},"menu"),c.a.createElement("span",null,"Continue with Facebook"))),c.a.createElement("div",{className:"center"},c.a.createElement("button",{onClick:function(e){P(!0),p.signInWithPopup(N).then((function(e){var t=e.user.uid;w.collection("users").doc(t).get().then((function(e){var a="";e.data()&&(a=e.data().username),a&&""!==a||w.collection("users").doc(t).set({username:t},{merge:!0}).then((function(){R({type:"LOG_IN"})}))}))})).catch((function(e){t.current.classList.remove("hide"),setTimeout((function(){t.current.classList.add("hide")}),2500),t.current.firstElementChild.textContent=e.message,P(!1)}))},className:"fake-button gg-btn"},c.a.createElement("i",{className:"material-icons black-text social-icon"},"menu"),c.a.createElement("span",null,"Continue with Google")))),I?c.a.createElement("img",{src:E.a,alt:"loading",className:"loader mainpage-loader"}):"")},x=[a(58),a(59),a(60),a(61),a(62),a(63),a(64)],k=[a(65),a(66),a(67),a(68),a(69),a(70),a(71)],S=[a(72),a(73),a(74),a(75),a(76),a(77),a(78)],L=[a(79),a(80),a(81),a(82),a(83),a(84),a(85)];function I(){var e=Object(n.useState)([{text:"weekend dinner idea",color:"#ffab00",type:k},{text:"home decor idea",color:"#009688",type:x},{text:"new look outfit",color:"dodgerblue",type:L},{text:"logo design idea",color:"#d84315",type:S}]),t=Object(o.a)(e,2),a=t[0],l=(t[1],Object(n.useRef)()),r=Object(n.useRef)(),s=Object(n.useRef)(a[0].type);return Object(n.useEffect)((function(){var e=new AbortController,t=1;l.current.style.color="#ffab00";var n=setInterval((function(){for(var e=r.current.children,n=0;n<e.length;n++)e[n].classList.remove("anim".concat(n+1));var c=a[t].text,o=a[t].color;l.current.textContent=c,l.current.style.color=o,s.current=a[t].type,t!==a.length-1?t+=1:t=0;for(var i=0;i<e.length;i++){e[i].firstChild.src=s.current[i]}setTimeout((function(){for(var t=0;t<e.length;t++)e[t].classList.add("anim".concat(t+1))}),5500)}),1e4);return function(){console.log("aborting main page"),clearInterval(n),e.abort()}}),[a,s]),Object(n.useEffect)((function(){var e=new AbortController,t=function(){window.innerWidth<700?r.current.style.display="none":r.current.style.display="block"};return window.innerWidth<700&&(r.current.style.display="none"),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t),e.abort()}})),c.a.createElement("div",{className:"main-body"},c.a.createElement("div",{className:"center main-text"},"Get your next"),c.a.createElement("div",{ref:l,className:"center main-text"},a[0].text),c.a.createElement("div",{ref:r,className:"row hide-on-small-only"},c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img1",loading:"lazy",alt:"img1",src:k[6]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img2",loading:"lazy",alt:"img1",src:k[0]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img3",loading:"lazy",alt:"img1",src:k[1]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img4",loading:"lazy",alt:"img1",src:k[2]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img5",loading:"lazy",alt:"img1",src:k[3]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img6",loading:"lazy",alt:"img1",src:k[4]})),c.a.createElement("div",{className:"col l1"},c.a.createElement("img",{className:"anim-img7",loading:"lazy",alt:"img1",src:k[5]}))))}a(86);function P(e){return c.a.createElement("div",{className:"searched-users container"},e.foundUsers.map((function(t,a){return c.a.createElement(u.b,{to:"/messages"},c.a.createElement("div",{className:"row searched-user",onClick:e.hideMessagePanel,"data-id":t[4],"data-username":t[0],key:a},c.a.createElement("div",{className:"col l1"},""!==t[3]?c.a.createElement("img",{className:"account-image searched-image",src:t[3],alt:"".concat(t[0])}):c.a.createElement("i",{className:"material-icons account-icon searched-icon"},"account_circle")),c.a.createElement("div",{className:"col l3"},c.a.createElement("div",{className:"searched-name bold-weight"},"".concat(t[1]," ").concat(t[2])),c.a.createElement("div",{className:"searched-name searched-username"},t[4]))))})))}function T(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),u=m[0],d=m[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),b=g[0],E=g[1],v=Object(n.useState)([]),p=Object(o.a)(v,2),N=p[0],w=p[1],j=Object(n.useState)(!1),O=Object(o.a)(j,2),C=O[0],y=O[1],x=Object(n.useState)(""),k=Object(o.a)(x,2),S=k[0],L=k[1],I=Object(n.useState)(""),T=Object(o.a)(I,2),R=T[0],U=T[1],A=Object(n.useState)(""),_=Object(o.a)(A,2),F=_[0],D=_[1],B=Object(n.useRef)(),G=function(){r(!1),d(!0)};return c.a.createElement("div",{className:"right drop-down messages hide",ref:e.msgRef},c.a.createElement("div",{className:"subheading-text center ".concat(l?"hide":"")},c.a.createElement("span",{className:"msg-heading bold-weight"},"Inbox"),c.a.createElement("span",{className:"right msg-icons"},c.a.createElement("i",{className:"material-icons msg-icon",onClick:function(){r(!0),d(!1)}},"edit")),c.a.createElement("div",null,"Send a message")),c.a.createElement("div",{className:"hide ".concat(l?"hide":"")},c.a.createElement("h3",{ref:e.msgInfoRef,className:"bold-weight msg-text"},"Share ideas with your friends")),c.a.createElement("div",{className:"new-message ".concat(u?"hide":"")},c.a.createElement("div",{className:"subheading-text"},c.a.createElement("span",{className:"msg-heading bold-weight"},"New Message"),c.a.createElement("span",{className:"right msg-icons"},c.a.createElement("button",{className:"s-button message-cancel",onClick:G},"Cancel"))),c.a.createElement("div",{className:"message-to-input"},c.a.createElement("div",{className:"search-box"},c.a.createElement("span",{className:"bold-weight search-text"},"To:"),c.a.createElement("span",null,c.a.createElement("input",{type:"text",className:"s-input search-user",value:R,onKeyUp:function(e){var t=h.auth().currentUser,a=e.target.value;0!==a.length?h.firestore().collection("users").get().then((function(e){var n=e.docs,c=[];n.forEach((function(e){var n=e.data(),l=e.id;if(l!==t.uid){var r=n.firstName,o=n.lastName,s=n.username,i=n.profileImage,m=[s=s||"",r=r||"",o=o||"",i=i||"",l];("".concat(r.toLowerCase()," ").concat(o.toLowerCase()," ").concat(s.toLowerCase()).includes(a.toLowerCase())||l.includes(a))&&c.push(m)}})),0===c.length&&(c=[["","No","User Found","",""]]),w(c),E(!0),C&&y(!1)})):w([])},onClick:function(){B.current.classList.add("found-users"),B.current.classList.add("blue-border")},onChange:function(e){U(e.target.value)}})))),c.a.createElement("br",null),c.a.createElement("div",{ref:B,className:""},b?c.a.createElement(P,{hider:G,clickFunc:function(e){for(var t=e.target,a="";t.parentNode;){if(t.classList.contains("row")){a=t;break}t=t.parentNode}var n=a.dataset.username,c=a.dataset.id;U(n||c),D(c),y(!0),E(!1)},foundUsers:N}):""),c.a.createElement("div",{className:"send-message-input"},c.a.createElement("hr",null),c.a.createElement("div",{className:"input-box"},c.a.createElement("input",{placeholder:"Add a message",type:"text",value:S,onChange:function(e){L(e.target.value)},className:"s-input message-user",onClick:function(){B.current.classList.remove("found-users"),B.current.classList.remove("blue-border"),E(!1),w([])}}),c.a.createElement("i",{className:"material-icons send-icon",onClick:function(){var e=F;if(C){if(""!==S){var t=h.auth().currentUser,a=h.firestore().collection("chatrooms");a.get().then((function(n){var c="chat_".concat(t.uid<e?t.uid+"_"+e:e+"_"+t.uid);a.doc(c).collection("messages").get().then((function(n){var l=n.docs.length,r="message".concat(l+1),o=new Date,i=o.getUTCDate(),m=o.getUTCDay(),u=o.getUTCFullYear(),d=o.getUTCMonth();a.doc(c).collection("messages").doc(r).set({text:S,date:h.firestore.FieldValue.serverTimestamp(),by:t.uid,monthUTC:d,dayUTC:m,yearUTC:u,dateUTC:i}).then((function(){var a,n=h.firestore().collection("userChatrooms");n.doc(t.uid).set((a={},Object(s.a)(a,c,!0),Object(s.a)(a,"lastSeen",h.firestore.FieldValue.serverTimestamp()),a),{merge:!0}),n.doc(e).set(Object(s.a)({},c,!0),{merge:!0}),alert("success"),G(),U(""),L("")}))}))}))}}else alert("Please enter A Valid User")}},"send")))))}function R(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){var t=new AbortController;if(""===e.qData)return r([]),void d(!0);var a=[];return h.firestore().collection("tags").get().then((function(e){return e.docs})).then((function(t){if(0===t.length)return d(!0),void r([]);t.forEach((function(t){var n=t.data().name;n.includes(e.qData.toLowerCase())&&(a.push(n),d(!1))}))})).then((function(){console.log(a),r(a)})),function(){console.log("aborting tag search"),t.abort()}}),[e.qData]),c.a.createElement("div",{className:"found-panel big-container \n                        ".concat(!0===e.hidden?"hide":"")},l.map((function(t,a){return c.a.createElement(u.b,{to:"/search/".concat(t),onClick:function(){e.makeSmaller()},key:a},c.a.createElement("div",{className:"left black-text"},c.a.createElement("div",{className:"boxed bordered"},t)),c.a.createElement("br",null))})),m?c.a.createElement("div",{className:"center special-boxed"},"No Results"):"")}function U(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useRef)(),f=Object(n.useRef)(),g=Object(n.useRef)();function b(e){f.current.classList.remove("big-input"),g.current.classList.remove("big-container"),d.current.classList.add("hide"),r(""),u(!0)}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:g,className:"col center l4 m2 input-field search-bar-container"},c.a.createElement("i",{className:"material-icons"},"search"),c.a.createElement("input",{ref:f,onChange:function(e){r(e.target.value)},onClick:function(e){e.target.classList.add("big-input"),g.current.classList.add("big-container"),d.current.classList.remove("hide"),u(!1)},id:"search",type:"text",placeholder:"Search",value:l}),c.a.createElement("button",{ref:d,onClick:b,className:"s-button blackbg-color hide white-text"},"X"),c.a.createElement(R,{qData:l,hidden:m,makeSmaller:b})))}function A(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useRef)(),r=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)(),f=Object(n.useRef)(),g=Object(n.useRef)(),b=Object(n.useRef)(),v=Object(n.useState)(""),p=Object(o.a)(v,2),N=p[0],w=p[1],j=Object(n.useState)([]),O=Object(o.a)(j,2),C=O[0],y=O[1],x=Object(n.useState)(!1),k=Object(o.a)(x,2),S=k[0],L=k[1],I=Object(n.useState)(""),P=Object(o.a)(I,2),R=P[0],A=P[1],_=Object(d.c)((function(e){return e.isLogged}));Object(n.useEffect)((function(){var e=new AbortController;if(_){var t=h.auth().currentUser;if(t)h.firestore().collection("users").doc(t.uid).get().then((function(e){if(e.data()){var t=e.data().profileImage,a=e.data().username;t&&w(t),A(a)}}))}return function(){console.log("aborting header"),e.abort()}}),[_]);var F=function(){e.current.classList.add("hide"),t.current.classList.add("hide"),a.current.classList.add("hide")},D=function(){W(),h.auth().signOut().then((function(){L(!0)}))},B=c.a.useCallback((function(e,t){return new Promise((function(a,n){e.onSnapshot((function(e){var n=e.data();for(var c in n)"lastSeen"!==c&&t.push(c);a(t)}),(function(e){return n(e)}))}))}),[]),G=function(e){var t=[];e.forEach((function(e){h.firestore().collection("chatrooms").doc(e).collection("messages").get().then((function(e){e.docs.filter((function(e,a,n){return n[a+1]||(console.log(e.data()),t.push(e.data())),0}))})).then((function(e){y(t)}))}))},M=function(e){e.target===i.current?(i.current.classList.add("selected"),f.current.classList.remove("selected")):(i.current.classList.remove("selected"),f.current.classList.add("selected"))},z=function(e){e.target===g.current?(g.current.classList.add("selected"),b.current.classList.remove("selected")):(g.current.classList.remove("selected"),b.current.classList.add("selected"))},W=function(){g.current.classList.remove("selected"),i.current.classList.remove("selected"),b.current.classList.remove("selected"),f.current.classList.remove("selected")};return c.a.createElement("div",null,S?c.a.createElement(m.a,{to:"/"}):"",c.a.createElement("nav",{className:"padded white black-text"},c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col l3 hide-on-med-and-down"},c.a.createElement("img",{className:"logo",src:E.a,alt:"logo"}),c.a.createElement(u.b,{to:"/main"},c.a.createElement("span",{ref:i,onClick:M,className:"tab black-text bold-weight selected ".concat(_?"":"hide")},"Home")),c.a.createElement(u.b,{to:"/following"},c.a.createElement("span",{ref:f,onClick:M,className:"tab black-text bold-weight ".concat(_?"":"hide")},"Following"))),c.a.createElement("div",{className:"col l2 hide-on-large-only"},c.a.createElement("img",{className:"logo",src:E.a,alt:"logo"}),c.a.createElement(u.b,{to:"/main"},c.a.createElement("span",{ref:g,onClick:z,className:"tab bold-weight black-text selected ".concat(_?"":"hide")},"Home")),c.a.createElement(u.b,{to:"/following"},c.a.createElement("span",{ref:b,onClick:z,className:"tab black-text bold-weight ".concat(_?"":"hide")},"Following"))),c.a.createElement(U,null),c.a.createElement("div",{className:""},c.a.createElement("div",{ref:r,className:"col l3 right greyBgColor flexed hide-on-med-and-up ".concat(_?"":"hide")},c.a.createElement("i",{className:"material-icons pin-icon",onClick:function(e){s.current.classList.contains("hide")?s.current.classList.remove("hide"):s.current.classList.add("hide")}},"menu")),c.a.createElement("div",{className:"col l12 right hide show-animate greyBgColor",ref:s},c.a.createElement("div",{className:"purpColor pointer",onClick:D},"Logout"),c.a.createElement(u.b,{to:"/user/".concat(R)},c.a.createElement("div",{className:"purpColor pointer",onClick:W},"Account")),c.a.createElement(u.b,{to:"/main/settings",onClick:W},c.a.createElement("div",{className:"purpColor"},"Settings")),c.a.createElement(u.b,{to:"/messages",onClick:W},c.a.createElement("div",{className:"purpColor"},"Messages")),c.a.createElement(u.b,{to:"/create-a-pin",onClick:W},c.a.createElement("div",{className:"purpColor"},"Create A Pin")))),c.a.createElement("div",{className:"col l3 right flexed hide-on-small-only ".concat(_?"":"hide")},c.a.createElement("i",{className:"material-icons icon center",onClick:function(){e.current.classList.contains("hide")?(F(),e.current.classList.remove("hide")):F()}},"keyboard_arrow_down"),""===N?c.a.createElement(u.b,{to:"/user/".concat(R),onClick:W},c.a.createElement("i",{className:"material-icons icon center",onClick:W},"account_circle")):c.a.createElement(u.b,{to:"/user/".concat(R),onClick:W},c.a.createElement("img",{src:N,className:"account-image header-icon",alt:"icon",onClick:W})),c.a.createElement("i",{className:"material-icons icon center",onClick:function(){if(a.current.classList.contains("hide")){F(),a.current.classList.remove("hide");var e=h.auth().currentUser,t=h.firestore().collection("userChatrooms").doc(e.uid);B(t,[]).then((function(e){G(e)}))}else F()}},"textsms"),c.a.createElement("i",{className:"material-icons icon center",onClick:function(){t.current.classList.contains("hide")?(F(),t.current.classList.remove("hide")):F()}},"notifications")),c.a.createElement("div",{className:"col l3 right flexed ".concat(_?"hide":"")},c.a.createElement(u.b,{to:"/"},c.a.createElement("button",{className:"s-button redbg-color"},"Login")))),c.a.createElement("div",{className:"right drop-down account hide",ref:e},c.a.createElement("div",{className:"subheading-text"},"Accounts"),c.a.createElement(u.b,{to:"/main/settings",onClick:W,className:"bold-weight account-link black-text"},"Settings"),c.a.createElement("br",null),c.a.createElement(u.b,{to:"/create-a-pin",onClick:W},c.a.createElement("div",{className:"bold-weight account-link black-text"},"Create Pin")),c.a.createElement("div",{className:"bold-weight account-link",onClick:D},"Logout"),c.a.createElement(u.b,{to:"/user/".concat(R),onClick:W},c.a.createElement("div",{className:"bold-weight account-link"},"Account"))),c.a.createElement("div",{className:"right drop-down notifications hide",ref:t},c.a.createElement("div",{className:"subheading-text bold-weight center"},"Updates")))),c.a.createElement(T,{msgRef:a,lastMessages:C,msgInfoRef:l}))}function _(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],r=a[1],m=Object(n.useState)(),u=Object(o.a)(m,2),f=u[0],g=u[1],b=Object(n.useState)(),v=Object(o.a)(b,2),p=v[0],N=v[1],w=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),C=Object(n.useReducer)((function(e,t){var a=t.field,n=t.value;return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},a,n))}),{firstName:"",lastName:"",username:"",about:"",location:"",profileImage:""}),y=Object(o.a)(C,2),x=y[0],k=y[1],S=x.firstName,L=x.lastName,I=x.username,P=x.about,T=x.location,R=x.profileImage,U=Object(d.c)((function(e){return e.isLogged}));Object(n.useEffect)((function(){var e=new AbortController;if(U){var t=h.auth().currentUser;if(t)h.firestore().collection("users").doc(t.uid).get().then((function(e){_(e.data()),g(e.data())}))}return function(){console.log("aborting settings-edit"),e.abort()}}),[U]);var A=function(e){k({field:e.target.name,value:e.target.value})},_=function(e){var t=e.firstName,a=e.lastName,n=e.username,c=e.about,l=e.location,r=e.profileImage;a=a||"",n=n||"",c=c||"",l=l||"",r=r||"",k({field:"firstName",value:t=t||""}),k({field:"lastName",value:a}),k({field:"username",value:n}),k({field:"about",value:c}),k({field:"location",value:l}),k({field:"profileImage",value:r})};return c.a.createElement("div",{className:"".concat(e.mainClass)},c.a.createElement("div",{className:"col l6 offset-l1"},c.a.createElement("div",{className:"left main-info"},c.a.createElement("h4",{className:"bold-weight heading-text"},"Edit Profile"),c.a.createElement("p",{className:"subheading-text"},"People on Pinterest will get to know you with the info below")),c.a.createElement("div",{className:"right s-buttons"},c.a.createElement("button",{className:"s-button vertical-align bold-weight",onClick:function(){_(f)}},"Cancel"),c.a.createElement("button",{className:"s-button vertical-align redbg-color bold-weight",onClick:function(){if(U){var e=f.firstNameMain,t=f.lastNameMain,a=f.usernameMain,n=f.aboutMain,c=f.locationMain;e=e||"",t=t||"",n=n||"",c=c||"",I===(a=a||"")?I="":(I=I.split(" ").join(""),console.log(I));var l=h.auth().currentUser,r=h.firestore().collection("users").doc(l.uid);h.firestore().collectionGroup("users").where("username","==",I).get().then((function(l){l.docs.length>0?alert("username is taken"):r.update({firstName:""!==S?S:e,lastName:""!==L?L:t,username:""!==I?I:a,about:""!==P?P:n,location:""!==T?T:c}).then((function(){alert("success"),r.get().then((function(e){var t=e.data();g(t)}))}))}))}}},"Done")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"subheading-text"},"Photo"),c.a.createElement("div",{className:"user-image right"},""===R?c.a.createElement("i",{className:"material-icons account-icon"},"account_circle"):c.a.createElement("img",{src:R,className:"account-image",alt:"profile_icon"}),c.a.createElement("button",{className:"s-button image-btn",onClick:function(){r(!0)}},"Change"))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"account-name"},c.a.createElement("div",{className:"left input-field"},c.a.createElement("div",{className:"subheading-text"},"First Name"),c.a.createElement("input",{type:"text",name:"firstName",onChange:A,value:S,placeholder:"John",className:"s-input"})),c.a.createElement("div",{className:"right input-field"},c.a.createElement("div",{className:"subheading-text left"},"Last Name"),c.a.createElement("input",{type:"text",name:"lastName",onChange:A,value:L,placeholder:"Appleseed",className:"s-input left"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"account-username"},c.a.createElement("div",{className:"subheading-text"},"Username"),c.a.createElement("input",{type:"text",name:"username",onChange:A,value:I,placeholder:" johnappleseed",className:"s-input s-username"})),c.a.createElement("div",{className:"account-about"},c.a.createElement("div",{className:"subheading-text"},"About your profile"),c.a.createElement("textarea",{className:"s-textarea",name:"about",onChange:A,value:P,placeholder:"Write a little bit about yourself here!"})),c.a.createElement("div",{className:"account-location"},c.a.createElement("div",{className:"subheading-text"},"Location"),c.a.createElement("input",{type:"text",name:"location",onChange:A,value:T,className:"s-input s-location",placeholder:"Ex. San Francisco"}))),l?c.a.createElement("div",{className:"overlay s-overlay"}):"",l?c.a.createElement("div",{className:"s-modal img-modal"},c.a.createElement("h4",{className:"center"},"Select an Image"),c.a.createElement("input",{onChange:function(e){N(e.target.value)},ref:j,type:"file"}),c.a.createElement("div",{className:"right move-bottom"},c.a.createElement("button",{className:"s-button",onClick:function(){r(!1)},ref:O},"Close"),c.a.createElement("button",{className:"s-button redbg-color",onClick:function(e){console.log(p),w.current.classList.remove("hide");var t=h.auth().currentUser,a=h.storage().ref(),n=j.current.files[0],c=n.name,l={contentType:n.type},o=e.target;o.disabled=!0,O.current.disabled=!0,a.child("profilePictures/".concat(t.uid,"/").concat(c)).put(n,l).then((function(e){return e.ref.getDownloadURL()})).then((function(e){console.log(e),h.firestore().collection("users").doc(t.uid).update({profileImage:e}).then((function(){o.disabled=!1,O.current.disabled=!1,alert("Image Upload Successful"),w.current.classList.add("hide"),r(!1),k({field:"profileImage",value:e})}))})).catch((function(e){alert(e.message)}))}},"Save"))):"",c.a.createElement("img",{ref:w,src:E.a,alt:"loading",className:"loader hide"}))}var F=a(18),D=h.firestore();function B(e){var t=c.a.useRef(),a=c.a.useRef(),l=Object(n.useState)(),r=Object(o.a)(l,2),m=r[0],u=r[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),b=g[0],E=g[1],v=Object(d.c)((function(e){return e.userID}));Object(n.useEffect)((function(){var e=new AbortController,t=h.auth().currentUser;if(t){var a=t.uid;D.collection("users").doc(a).get().then((function(e){var t=e.data(),a=t.age,n=t.email?t.email:"",c=t.gender?t.gender:"";j({field:"email",value:n}),j({field:"age",value:a}),j({field:"gender",value:c}),u(e.data())}))}return function(){console.log("aborting settings-account"),e.abort()}}),[v]);var p=Object(n.useReducer)((function(e,t){var a=t.field,n=t.value;return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},a,n))}),{oldPass:"",newPass:"",newAgain:"",email:"",gender:"",age:""}),N=Object(o.a)(p,2),w=N[0],j=N[1],O=w.oldPass,C=w.newPass,y=w.newAgain,x=w.email,k=w.gender,S=w.age,L=function(e){j({field:e.target.name,value:e.target.value})};function I(){E(!1),j({field:"oldPass",value:""}),j({field:"newPass",value:""}),j({field:"newAgain",value:""})}var P=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non-binary",label:"Non-Binary"}];return c.a.createElement("div",{className:"".concat(e.mainClass)},c.a.createElement("div",{className:"col l6 offset-l1"},c.a.createElement("div",{className:"left main-info"},c.a.createElement("h4",{className:"bold-weight heading-text"},"Account Settings"),c.a.createElement("p",{className:"subheading-text"},"Set your login preferences, help us personalize your experience and make big account changes here.")),c.a.createElement("div",{className:"right s-buttons"},c.a.createElement("button",{className:"s-button vertical-align bold-weight",onClick:function(){!function(e){var t=e.email,a=e.age,n=e.gender;a=a||"",n=n||"",j({field:"email",value:t=t||""}),j({field:"age",value:a}),j({field:"gender",value:n})}(m)},disabled:""===v},"Cancel"),c.a.createElement("button",{className:"s-button vertical-align redbg-color bold-weight",disabled:""===v,onClick:function(){""===x||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(x)?Number(S)>120?alert("How are you still alive, guest from the internet?"):D.collection("users").doc(v).update({email:x,age:S,gender:k}).then((function(){alert("success")})).catch((function(e){alert(e.message)})):alert("Invalid Email Address")}},"Done")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"s-heading-text bold-weight not-opaque"},"Basic Information"),c.a.createElement("div",{className:"user-email right"},c.a.createElement("div",{className:"s-subheading-text"},"Email Address"),c.a.createElement("input",{type:"email",name:"email",onChange:L,value:x,placeholder:"JohnAppleseed@gmail.com",className:"s-input"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"left user-age"},c.a.createElement("div",{className:"s-subheading-text"},"Age"),c.a.createElement("input",{type:"number",placeholder:"18",value:Number(S),name:"age",onChange:L,className:"s-input s-age"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"left"},c.a.createElement("button",{className:"s-button change-passbtn bold-weight",onClick:function(){E(!0)}},"Change Your Password")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"left user-gender col l6"},c.a.createElement("div",{className:"s-subheading-text"},"Gender"),c.a.createElement(F.a,{options:P,value:P.filter((function(e){return e.value===k})),onChange:function(e){j({field:"gender",value:e.value}),console.log(e)}})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),!0===b?c.a.createElement("div",{className:"overlay s-overlay"}):"",!0===b?c.a.createElement("div",{className:"s-modal"},c.a.createElement("div",{className:"center bold-weight"},"Change Your Password"),c.a.createElement("br",null),c.a.createElement("div",{className:"col l6 old-pass"},c.a.createElement("div",{className:"left col l3 s-subheading-text pass-header bold-weight"},"Old Password"),c.a.createElement("div",{className:"right col l3 s-old-pass"},c.a.createElement("input",{name:"oldPass",value:O,className:"s-input",onChange:L,type:"password"}),c.a.createElement("div",{ref:a,className:"err"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"left col l6 h-row"},c.a.createElement("hr",null))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"col l6 new-pass"},c.a.createElement("div",{className:"left col l3 s-subheading-text pass-header bold-weight"},"New Password"),c.a.createElement("div",{className:"right col l3 s-new-pass"},c.a.createElement("input",{name:"newPass",value:C,onChange:L,className:"s-input",type:"password"}),c.a.createElement("div",{className:"err"})),c.a.createElement("div",{className:"left col l6 h-row"},c.a.createElement("hr",null))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"col l6 new-pass"},c.a.createElement("div",{className:"left col l3 s-subheading-text pass-header bold-weight"},"Type it Again"),c.a.createElement("div",{className:"right col l3 s-new-pass"},c.a.createElement("input",{className:"s-input",value:y,onChange:L,type:"password",name:"newAgain"}),c.a.createElement("div",{ref:t,className:"err"}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"col l6 button-container"},c.a.createElement("div",{className:"move-right"},c.a.createElement("button",{className:"s-button bold-weight bigger",onClick:I},"Cancel"),c.a.createElement("button",{className:"s-button bold-weight redbg-color bigger",onClick:function(){var e=h.auth().currentUser;if(C===y){var n=h.auth.EmailAuthProvider.credential(h.auth().currentUser.email,O);e.reauthenticateWithCredential(n).then((function(){console.log("success"),e.updatePassword(C).then((function(){t.current.textContent="",a.current.textContent="",alert("success"),I()})).catch((function(e){alert(e.message)}))})).catch((function(e){a.current.textContent="Invalid Password"}))}else t.current.textContent="Password don't match"}},"Save")))):""))}function G(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(),i=Object(o.a)(s,2),m=i[0],u=i[1];Object(n.useEffect)((function(){var e=new AbortController,t=[];return h.firestore().collection("tags").get().then((function(e){e.docs.map((function(e){var a=e.data().name,n={value:a,label:a};return t.push(n),e.data()}))})).then((function(){u(t)})),function(){e.abort()}}),[]);return c.a.createElement("div",{className:"".concat(e.mainClass)},c.a.createElement("div",{className:"col l6 offset-l1"},c.a.createElement("div",{className:"left main-info"},c.a.createElement("h4",{className:"bold-weight heading-text"},"User Preferences"),c.a.createElement("p",{className:"subheading-text"},"Set your preferences, help us personalize your experience.")),c.a.createElement("div",{className:"right s-buttons btn-con-t"},c.a.createElement("button",{className:"s-button vertical-align bold-weight"},"Cancel"),c.a.createElement("button",{className:"s-button vertical-align redbg-color bold-weight",onClick:function(){if(l.length<1)console.log("no change");else{for(var e=h.auth().currentUser,t=h.firestore().collection("users").doc(e.uid),a=[],n=0;n<l.length;n++)a.push(l[n].value);console.log(a),t.update({preferences:h.firestore.FieldValue.delete()}).then((function(){t.update({preferences:a}),alert("success")}))}}},"Done")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("hr",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"left user-preferences col l6"},c.a.createElement(F.a,{name:"preferences",placeholder:"Preferences",options:m,onChange:function(e){r(e)},isMulti:!0}))))}function M(){var e=Object(n.useState)("preferences"),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],u=s[1],d=Object(n.useRef)(""),f=function(e){var t=e.target;d.current.classList.remove("s-selected"),d.current=e.target,t.classList.add("s-selected");var a=t.id;l(a)};return c.a.createElement("div",{className:"row"},i?c.a.createElement(m.a,{to:"/main"}):"",c.a.createElement("div",{className:"col l3"},c.a.createElement("div",{className:"left"},c.a.createElement("i",{className:"material-icons backward-btn",onClick:function(){u(!0)}},"keyboard_backspace")),c.a.createElement("br",null),c.a.createElement("div",{className:"right"},c.a.createElement("div",null,c.a.createElement("i",{className:"material-icons s-icon"},"edit"),c.a.createElement("span",{className:"s-heading-text bold-weight",id:"profile",onClick:f},"Edit Profile")),c.a.createElement("div",null,c.a.createElement("i",{className:"material-icons s-icon"},"account_circle"),c.a.createElement("span",{className:"s-heading-text bold-weight",id:"account",onClick:f},"Account Settings")),c.a.createElement("div",null,c.a.createElement("i",{className:"material-icons s-icon"},"favorite"),c.a.createElement("span",{className:"s-heading-text bold-weight",id:"preferences",ref:d,onClick:f},"User Preferences")))),"profile"===a?c.a.createElement(_,{mainClass:""}):"","account"===a?c.a.createElement(B,{mainClass:""}):"","preferences"===a?c.a.createElement(G,{mainClass:""}):"")}var z=a(26);function W(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],r=a[1];return c.a.createElement("div",{className:"fixed-width ".concat(l?"hide":"")},c.a.createElement("div",{className:"photogrid-photo"},e.deletable&&!0===e.deletable?c.a.createElement("i",{className:"material-icons delete-saved-pin",onClick:function(){var t=e.imageData[3],a=h.auth().currentUser;h.firestore().collection("savedPins").doc(a.uid).collection("userSaved").where("postId","==",t).get().then((function(e){e.docs[0].ref.delete()})).then((function(){r(!0)}))}},"delete"):"",c.a.createElement(u.b,{to:"/pin/".concat(e.imageData[3])},c.a.createElement("img",{className:"auto-fit1",src:e.imageData[2],load:"lazy",alt:"userpost","data-title":e.imageData[1],"data-postid":e.imageData[3],"data-by":e.imageData[4],"data-tag":e.imageData[5]}))))}function V(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(!0),f=Object(o.a)(d,2),g=f[0],b=f[1],v=Object(n.useRef)();Object(n.useEffect)((function(){var t,a=new AbortController,n=e.pref;t=e.following?h.firestore().collectionGroup("userPosts").where("by","in",e.following).orderBy("created","desc"):e.saved?h.firestore().collectionGroup("userPosts").where("docId","in",e.saved).orderBy("created","desc"):h.firestore().collectionGroup("userPosts").where("tag","in",n).orderBy("created","desc");var c=[],l=[];return t.get().then((function(e){e.docs.forEach((function(e){var t=e.data(),a=[t.title,t.about,t.url,t.docId,t.by,t.tag];c.push(a)}))})).then((function(){for(var e=0;e<20&&c[0];e++)l.push(c.shift());u(c),r(l),b(!1)})).catch((function(e){console.log(e),b(!1)})),function(){console.log("aborting photo grids"),a.abort()}}),[e.pref,e.following,e.saved]),Object(n.useEffect)((function(){var e=function e(){var t=document.getElementById("top-el");if(p(t)){var a=[],n=m;console.log("element bottom reached");for(var c=0;c<20&&n[0];c++)a.push(n.shift());u(n),a.length>0?r((function(e){return[].concat(Object(z.a)(e),a)})):window.removeEventListener("scroll",e)}};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[m]);var p=function(e){return e.getBoundingClientRect().bottom<=window.innerHeight};return c.a.createElement("div",{id:"top-el"},0!==l.length?c.a.createElement("div",{className:"photogrid-container",ref:v},l.map((function(t,a){return c.a.createElement(W,{imageData:t,key:a,deletable:!!e.saved})}))):c.a.createElement("div",{className:"center"},"No pins found"),c.a.createElement("div",{className:"center"},c.a.createElement("img",{className:"".concat(g?"":"hide"," loaderv2"),alt:"loading",src:E.a})))}function Y(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useState)(!0),r=Object(o.a)(l,2),s=r[0],i=r[1],m=Object(d.c)((function(e){return e.isLogged})),u=Object(n.useState)([]),f=Object(o.a)(u,2),g=f[0],b=f[1],E=Object(n.useState)(!1),v=Object(o.a)(E,2),p=v[0],N=v[1];Object(n.useEffect)((function(){var t=new AbortController,a=[];return h.firestore().collection("savedPins").doc(e.mainId).collection("userSaved").orderBy("savedOn").get().then((function(e){return e.docs})).then((function(e){e.forEach((function(e){a.push(e.data().postId)}))})).then((function(){b(a),console.log(a)})),function(){console.log("aborting profile tabs"),t.abort()}}),[m,e.mainId]);return c.a.createElement("div",null,c.a.createElement("div",{className:"pins center"},c.a.createElement("span",{className:"tab selected",ref:t,onClick:function(){t.current.classList.add("selected"),a.current.classList.remove("selected"),i(!0),N(!1)}},"Personal"),c.a.createElement("span",{className:"tab",ref:a,onClick:function(){t.current.classList.remove("selected"),a.current.classList.add("selected"),i(!1),N(!0)}},"Saved")),c.a.createElement("br",null),c.a.createElement("div",{className:"".concat(s?"":"hide")},e.mainId?c.a.createElement(V,{following:[e.mainId]}):""),c.a.createElement("div",{className:p?"":"hide"},g.length>0?c.a.createElement(V,{saved:g}):c.a.createElement("div",{className:"center not-found"},"No Saved Pins")))}function q(e){var t=Object(m.g)(),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(!1),f=Object(o.a)(i,2),g=f[0],b=f[1],v=Object(n.useState)(!1),p=Object(o.a)(v,2),N=p[0],w=p[1],j=Object(n.useState)(!0),O=Object(o.a)(j,2),C=O[0],y=O[1],x=Object(n.useState)(!1),k=Object(o.a)(x,2),S=k[0],L=k[1],I=Object(n.useState)(0),P=Object(o.a)(I,2),T=P[0],R=P[1],U=Object(n.useState)(0),A=Object(o.a)(U,2),_=A[0],F=A[1],D=Object(n.useState)(""),B=Object(o.a)(D,2),G=B[0],M=B[1],z=Object(d.c)((function(e){return e.isLogged})),W=t.userid;Object(n.useEffect)((function(){var e=new AbortController,t=h.firestore().collection("users").where("username","==",W),a="";return t.get().then((function(e){console.log(e.docs[0]);var t=e.docs[0];if(t){a=t.id,M(a);var n=t.data(),c=n.profileImage,l=n.firstName,r=n.lastName,o=n.about,i="".concat(l||""," ").concat(r||"");o=o||"",c=c||"",h.firestore().collection("following").doc(a).collection("userFollowing").get().then((function(e){R(e.docs.length)}));h.firestore().collectionGroup("userFollowing").where("following","==",a).get().then((function(e){var t=e.docs.length;return t})).then((function(e){F(e),y(!1)})),s([i,o,c]),b(!0)}else console.log("not found"),y(!1),b(!1);if(z){var m=h.auth().currentUser.uid;if(m){var u=m===a;console.log(u),h.firestore().collection("following").doc(m).collection("userFollowing").where("following","==",a).get().then((function(e){1===e.docs.length&&L(!0)})),w(u)}}})),function(){console.log("aborting user profile"),e.abort()}}),[W,z]);return c.a.createElement("div",null,c.a.createElement("div",{className:"".concat(C||g?"hide":""," center not-found")},"Not Found"),c.a.createElement("div",{className:"".concat(g?"bold-weight":"hide")},c.a.createElement("div",{className:"center"},""===r[2]?c.a.createElement("i",{className:"material-icons huge"},"account_circle"):c.a.createElement("img",{className:"profile-picture center",alt:"profileimage",src:r[2]})),c.a.createElement("div",{className:"name-container"},c.a.createElement("div",{className:"center name"},r[0])),c.a.createElement("div",{className:"about-info-container"},c.a.createElement("div",{className:"center about-info"},r[1])),c.a.createElement("div",{className:"follow-info center"},c.a.createElement(u.b,{to:"/user/".concat(W,"/followers")},c.a.createElement("span",{className:"followers"},_," followers")),c.a.createElement(u.b,{to:"/user/".concat(W,"/following")},c.a.createElement("span",{className:"following"},T," following"))),c.a.createElement("div",{className:"follow-container center"},c.a.createElement("button",{className:"s-button follow-btn redbg-color\n                            ".concat(!z||N||S?"hide":""),onClick:function(){if(!z||N||S||""===G)return"Cant Follow";var e=h.auth().currentUser.uid;h.firestore().collection("following").doc(e).collection("userFollowing").doc(G).set({following:G,by:e},{merge:!0}).then((function(){F(_+1),L(!0)}))}},"Follow"),c.a.createElement("button",{className:"  ".concat(S&&!N?"":"hide"," \n                            s-button follow-btn redbg-color"),onClick:function(){if(!z||N||!S||""===G)return"Cant Follow";var e=h.auth().currentUser.uid;h.firestore().collection("following").doc(e).collection("userFollowing").doc(G).delete().then((function(){F(_-1),L(!1)}))}},"Unfollow")),c.a.createElement("div",{className:"".concat(z&&N?"":"hide"," add-pins")},c.a.createElement("div",{className:"add-container tooltip"},c.a.createElement(u.b,{to:"/create-a-pin"},c.a.createElement("i",{className:"material-icons add-icon"},"add")),c.a.createElement(u.b,{className:"tooltiptext",to:"/create-a-pin"},"Add New Pin"))),G?c.a.createElement(Y,{mainId:G}):""),c.a.createElement("div",{className:"center"},c.a.createElement("img",{className:"".concat(C?"":"hide"," profile-loader"),alt:"loading",src:E.a})))}var X=a(40),H=a(96),J=(a(87),a(88),function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useRef)(),f=Object(n.useRef)(),g=Object(n.useRef)(),b=function(t){E(t)?console.log("valid file"):(t.invalid=!0,u("File type not permitted"),console.log("invalid")),r(t),e.handleImageChange(t)},E=function(e){return-1!==["image/jpeg","image/jpg","image/png","image/gif","image/x-icon"].indexOf(e.type)};return c.a.createElement("div",{className:"center cont"},c.a.createElement("div",{className:"drop-container",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;t.length&&b(t[t.length-1])},onClick:function(){d.current.click()}},c.a.createElement("div",{className:"drop-message"},c.a.createElement("input",{ref:d,className:"file-input",type:"file",onChange:function(){d.current.files.length&&b(d.current.files[0])}}),c.a.createElement("div",{className:"upload-icon"}),"Drag & Drop your image Here.")),c.a.createElement("div",{className:"d-modal",ref:f},c.a.createElement("div",{className:"d-overlay"}),c.a.createElement("div",{className:"close",onClick:function(){f.current.style.display="none",g.current.style.backgroundImage="none"}},"X"),c.a.createElement("div",{className:"modal-image",ref:g})),c.a.createElement("div",{className:"file-display-container ".concat(""===l?"hide":"")},c.a.createElement("div",{className:"file-status-bar",onClick:function(){!function(e){var t=new FileReader;f.current.style.display="block",t.readAsDataURL(e),t.onload=function(e){g.current.style.backgroundImage="url(".concat(e.target.result,")")}}(l)}},c.a.createElement("div",null,c.a.createElement("div",{className:"file-type-logo"}),c.a.createElement("div",{className:"file-type"},function(e){if(e)return e.substring(e.lastIndexOf(".")+1,e.length)||e}(l.name)),c.a.createElement("span",{className:"file-name"},l.name),c.a.createElement("span",{className:"file-size"},"(",function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]}(l.size),")")," ",l.invalid&&c.a.createElement("span",{className:"file-error-message"},"(",m,")")),c.a.createElement("div",{className:"file-remove",onClick:function(){r("")}},"X"))))});function K(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useRef)(),r=Object(n.useRef)(),u=Object(n.useRef)(),f=Object(n.useState)(),g=Object(o.a)(f,2),b=g[0],v=g[1],p=Object(n.useState)(!1),N=Object(o.a)(p,2),w=N[0],j=N[1],O=Object(n.useState)(!1),C=Object(o.a)(O,2),y=C[0],x=C[1],k=Object(n.useState)([]),S=Object(o.a)(k,2),L=S[0],I=S[1],P=Object(d.c)((function(e){return e.isLogged}));var T=Object(n.useReducer)((function(e,t){var a=t.field,n=t.value;return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},a,n))}),{title:"",about:"",tag:"",image:"",createdTag:""}),R=Object(o.a)(T,2),U=R[0],A=R[1],_=U.title,D=U.about,B=U.tag,G=U.image,M=U.createdTag;Object(n.useEffect)((function(){var e=new AbortController;if(P){var t=h.auth().currentUser;t&&h.firestore().collection("users").doc(t.uid).get().then((function(e){var t=e.data(),a=t.firstName,n=t.lastName,c=t.profileImage,l="".concat(a||""," ").concat(n||"");I([l,c=c||""])}))}var a=[];return h.firestore().collection("tags").get().then((function(e){e.docs.map((function(e){var t=e.data().name,n={value:t,label:t};return a.push(n),e.data()}))})).then((function(){v(a)})),function(){console.log("aborting pin creation"),e.abort()}}),[P]),Object(n.useEffect)((function(){var e=new AbortController,t=function(){window.innerWidth<650?(l.current.classList.remove("hide"),r.current.classList.add("hide"),u.current.style.width="500px",u.current.style.height="1100px"):(l.current.classList.add("hide"),r.current.classList.remove("hide"),u.current.style.width="900px",u.current.style.height="750px")};return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t),e.abort()}}),[]);var z=function(e){var t=e.target.name,a=e.target.value;A({field:t,value:a})},W=function(e){A({field:"tag",value:e})},V=function(){var n=!1;if(P){if(""!==M){var c,l=Object(X.a)(b);try{for(l.s();!(c=l.n()).done;){if(c.value.label===M.toLowerCase()){n=!0,t.current.textContent="Tag already Exists!, automatically selected it for you.";break}}}catch(E){l.e(E)}finally{l.f()}if(!n)h.firestore().collection("tags").add({name:M})}if(""!==B||""!==M)if(""===_||_.length>=70){var r=_.length>=70?"Enter Less Than 70 Characters for Title":"Title can't be empty";e.current.textContent=r}else{if(""===D||D.length>=200){var o=D.length>=200?"Enter Less Than 200 Characters":"Please Dont Leave This Empty";a.current.textContent=o}if(G.invalid||""===G)alert("please enter a valid image");else{a.current.textContent="",e.current.textContent="",t.current.textContent="",j(!0);var s=M||B.value,i=h.auth().currentUser,m={contentType:G.type},u=h.storage().ref(),d=Object(H.a)(),f=u.child("pins/".concat(i.uid,"/").concat(d)).put(G,m),g="";f.then((function(e){return g=e.ref.fullPath,e.ref.getDownloadURL()})).then((function(e){h.firestore().collection("posts").doc(i.uid).collection("userPosts").add({title:_,about:D,url:e,comments:0,created:h.firestore.Timestamp.fromDate(new Date),tag:s,by:i.uid,path:g}).then((function(e){h.firestore().collection("posts").doc(i.uid).collection("userPosts").doc(e.id).update({docId:e.id}).then((function(){A({field:"tag",value:""}),A({field:"createdTag",value:""}),A({field:"title",value:""}),A({field:"about",value:""}),A({field:"image",value:""}),j(!1),x(!0)}))})).catch((function(e){alert(e),j(!1)}))}))}}else alert("Please Select a tag")}};return c.a.createElement("div",{className:"pin-build-container"},y?c.a.createElement(m.a,{to:"/main"}):"",c.a.createElement("div",{className:"main-container",ref:u},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col l2 left"},c.a.createElement("div",{className:"drop-zone-container"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"content center"},c.a.createElement(J,{handleImageChange:function(e){A({field:"image",value:e})}}))))),c.a.createElement("br",null),c.a.createElement("div",{className:"col l7 right pin-information-container",ref:r},c.a.createElement("div",{className:"center upper-header"},"Create a New Pin"),c.a.createElement("div",{className:"main-title black-text"},c.a.createElement("input",{className:"title-input center",type:"text",name:"title",value:_,onChange:z,placeholder:"Add Your Title"}),c.a.createElement("div",{ref:e,className:"error center"})),c.a.createElement("div",{className:"user-info-container center"},L.length>0?c.a.createElement("div",{className:"user-info"},L[1]?c.a.createElement("img",{src:L[1],className:"pin-user",alt:"user-icon"}):c.a.createElement("i",{className:"material-icons icon-placeholder ".concat(""===L[1]?"":"hide")},"account_circle"),c.a.createElement("span",{className:"user-name"},L[0])):""),c.a.createElement("div",{className:"pin-about-container"},c.a.createElement("input",{type:"text",className:"pin-about-input center",value:D,name:"about",onChange:z,placeholder:"Tell everyone what your pin is about"}),c.a.createElement("div",{ref:a,className:"center error"})),c.a.createElement("div",{className:"tag-container"},c.a.createElement(F.a,{name:"tag",placeholder:"Select Tag",options:b,onChange:W})),c.a.createElement("div",{className:"general-container"},c.a.createElement("div",{className:"center"},"OR")),c.a.createElement("div",{className:"tag-creater-container center"},c.a.createElement("input",{className:"p-input center",type:"text",name:"createdTag",value:M,onChange:z,placeholder:"Type Your Own Tag(no spaces)"}),c.a.createElement("div",{ref:t,className:"center error"})),c.a.createElement("div",{className:"submit-btn center"},c.a.createElement("button",{className:"s-button redbg-color main-button",onClick:V},"Submit")),c.a.createElement("div",{className:"overlay ".concat(w?"":"hide")}),c.a.createElement("img",{src:E.a,className:"main-loader ".concat(w?"":"hide"),alt:"loader"}))),c.a.createElement("div",{className:"col l7 center hide",ref:l},c.a.createElement("div",{className:"center upper-header"},"Create a New Pin"),c.a.createElement("div",{className:"main-title black-text"},c.a.createElement("input",{className:"title-input center",type:"text",name:"title",value:_,onChange:z,placeholder:"Add Your Title"}),c.a.createElement("div",{ref:e,className:"error center"})),c.a.createElement("div",{className:"user-info-container center"},L.length>0?c.a.createElement("div",{className:"user-info"},L[1]?c.a.createElement("img",{src:L[1],className:"pin-user",alt:"user-icon"}):c.a.createElement("i",{className:"material-icons icon-placeholder ".concat(""===L[1]?"":"hide")},"account_circle"),c.a.createElement("span",{className:"user-name"},L[0])):""),c.a.createElement("div",{className:"pin-about-container"},c.a.createElement("input",{type:"text",className:"pin-about-input center",value:D,name:"about",onChange:z,placeholder:"Tell everyone what your pin is about"}),c.a.createElement("div",{ref:a,className:"center error"})),c.a.createElement("div",{className:"tag-container"},c.a.createElement(F.a,{name:"tag",placeholder:"Select Tag",options:b,onChange:W})),c.a.createElement("div",{className:"general-container"},c.a.createElement("div",{className:"center"},"OR")),c.a.createElement("div",{className:"tag-creater-container center"},c.a.createElement("input",{className:"p-input center",type:"text",name:"createdTag",value:M,onChange:z,placeholder:"Type Your Own Tag(no spaces)"}),c.a.createElement("div",{ref:t,className:"center error"})),c.a.createElement("div",{className:"submit-btn center"},c.a.createElement("button",{className:"s-button redbg-color main-button",onClick:V},"Submit")),c.a.createElement("div",{className:"overlay ".concat(w?"":"hide")}),c.a.createElement("img",{src:E.a,className:"main-loader ".concat(w?"":"hide"),alt:"loader"}))))}a(89);function $(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([]),s=Object(o.a)(r,2),i=s[0],m=s[1],u=Object(n.useState)([]),f=Object(o.a)(u,2),g=f[0],b=f[1],v=Object(n.useState)(!0),p=Object(o.a)(v,2),N=p[0],w=p[1],j=Object(d.c)((function(e){return e.isLogged}));Object(n.useEffect)((function(){var e=new AbortController;if(function(){var e=[];h.firestore().collection("tags").get().then((function(t){t.docs.forEach((function(t){e.push(t.data().name)}))})).then((function(){m(e)}))}(),j){var t=h.auth().currentUser;if(t)h.firestore().collection("users").doc(t.uid).get().then((function(e){if(!(e=e.data()))return l("none"),void w(!1);e.preferences&&0!==e.preferences.length?(l(e.preferences),w(!1)):(l("none"),w(!1))}))}else w(!1);return function(){console.log("aborting main"),e.abort()}}),[j]);var O=function(e){var t=e.target.classList,a=e.target.dataset.name;if(t.contains("tag-selected")){t.remove("tag-selected");var n=g,c=n.indexOf(a);n.splice(c,1),b(n)}else{t.add("tag-selected");var l=g;l.push(a),b(l)}};return c.a.createElement("div",null,"none"===a?c.a.createElement("div",{className:"pref-modal"},c.a.createElement("div",{className:"center small-text bold-weight"},"Which topics do you want to see more of?"),c.a.createElement("div",{className:"pref-container"},c.a.createElement("div",{className:"row"},i.map((function(e,t){return c.a.createElement("div",{key:t,"data-name":e,className:"col l5 m12 s12 pref",onClick:O},e)})))),c.a.createElement("div",{className:"center"},c.a.createElement("button",{className:"s-button pref-button",onClick:function(){if(0===g.length)alert("You Need To Select Atleast One Tag!");else{var e=h.auth().currentUser;h.firestore().collection("users").doc(e.uid).update({preferences:g}).then((function(){l(g)}))}}},"Done"))):"","none"!==a&&0!==a.length?c.a.createElement(V,{pref:a}):"",j||0===i.length?"":c.a.createElement(V,{pref:i}),c.a.createElement("div",{className:"".concat(N?"center":"hide")},c.a.createElement("img",{src:E.a,alt:"loading",className:"loaderv2"})))}function Z(e){var t=e.data,a=Object(n.useState)(0),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),f=m[0],g=m[1],b=Object(n.useState)([]),E=Object(o.a)(b,2),v=E[0],p=E[1],N=Object(n.useState)(!1),w=Object(o.a)(N,2),j=w[0],O=w[1],C=Object(n.useState)(!1),y=Object(o.a)(C,2),x=y[0],k=y[1],S=Object(n.useState)(!1),L=Object(o.a)(S,2),I=L[0],P=L[1],T=Object(d.c)((function(e){return e.isLogged}));Object(n.useEffect)((function(){var e=new AbortController,a=t.by;if(h.firestore().collection("users").doc(a).get().then((function(e){var t=e.data(),a=t.profileImage,n=t.firstName,c=t.lastName,l=t.username,r=["".concat(n||""," ").concat(c||""),l];g(a=a||""),p(r)})).catch((function(e){return console.log(e.message)})),h.firestore().collectionGroup("userLikes").where("postId","==",t.post).where("commentBy","==",t.by).where("commentId","==",t.commentId).get().then((function(e){var t=e.docs.length;s(t)})).catch((function(e){return console.log(e.message)})),T){var n=h.auth().currentUser;if(n)h.firestore().collectionGroup("userLikes").where("postId","==",t.post).where("likedBy","==",n.uid).where("commentBy","==",t.by).where("commentId","==",t.commentId).get().then((function(e){e.docs.length>0&&O(!0)})).catch((function(e){return console.log(e.message)})),n.uid===t.by&&P(!0)}return function(){e.abort()}}),[t,T]);return c.a.createElement("div",{className:"row p-comment-container ".concat(x?"hide":"")},c.a.createElement("div",{className:"col l2"},""===f?c.a.createElement(u.b,{to:"/user/".concat(v[1])},c.a.createElement("i",{className:"material-icons"},"account_circle")):c.a.createElement(u.b,{to:"/user/".concat(v[1])},c.a.createElement("img",{src:f,alt:"profile_picture",className:"pin-user-image fix-location"}))),c.a.createElement("br",null),c.a.createElement("div",{className:"col l3"},0!==v.length?c.a.createElement("div",null,c.a.createElement("div",{className:"comment-username"},v[0])):""),c.a.createElement("div",{className:"col l12 left text-container"},c.a.createElement("div",{className:"comment-message"},t.comment)),c.a.createElement("div",{className:"col l3 icon-container"},!1===j?c.a.createElement("i",{className:"material-icons comment-icons",onClick:function(){if(T&&!j){var e=h.auth().currentUser;h.firestore().collection("commentlikes").doc(e.uid).collection("userLikes").add({postId:t.post,commentBy:t.by,commentId:t.commentId,likedBy:e.uid}).then((function(){O(!0),s((function(e){return e+1}))})).catch((function(e){return console.log(e.message)}))}else alert("Please Login to perform this action")}},"favorite_border"):c.a.createElement("i",{className:"material-icons comment-icons",onClick:function(){if(T&&j){var e=h.auth().currentUser;h.firestore().collectionGroup("userLikes").where("postId","==",t.post).where("likedBy","==",e.uid).where("commentBy","==",t.by).where("commentId","==",t.commentId).get().then((function(e){e.docs[0].ref.delete().then((function(){O(!1),s((function(e){return e-1}))}))})).catch((function(e){return console.log(e.message)}))}else alert("Please Login to perform this action")}},"favorite"),r,I?c.a.createElement("i",{className:"material-icons right comment-icons",onClick:function(){if(T||I){var a=h.auth().currentUser,n=h.firestore().collectionGroup("userLikes").where("commentId","==",t.commentId),c=h.firestore().collection("comments").doc(a.uid).collection("userComments").doc(t.commentId);h.firestore().collectionGroup("userPosts").where("docId","==",t.post).get().then((function(t){var a=t.docs[0],n=a.data().comments-1;a.ref.update({comments:n}).then((function(){e.changeComments(n)}))})),c.delete().then((function(){n.get().then((function(e){e.docs.forEach((function(e){e.ref.delete()}))})).then((function(){k(!0)})).catch((function(e){return console.log(e.message)}))})).catch((function(e){return console.log(e.message)}))}else alert("login to perform this action")}},"delete"):""))}a(90);function Q(e){var t=Object(m.g)().pinid,a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)(0),f=Object(o.a)(i,2),g=f[0],b=f[1],E=Object(n.useState)([]),v=Object(o.a)(E,2),p=v[0],N=v[1],w=Object(n.useState)([]),j=Object(o.a)(w,2),O=j[0],C=j[1],y=Object(n.useState)([]),x=Object(o.a)(y,2),k=x[0],S=x[1],L=Object(n.useState)(0),I=Object(o.a)(L,2),P=I[0],T=I[1],R=Object(n.useState)(!1),U=Object(o.a)(R,2),A=U[0],_=U[1],F=Object(n.useState)(!1),D=Object(o.a)(F,2),B=D[0],G=D[1],M=Object(n.useState)(""),W=Object(o.a)(M,2),Y=W[0],q=W[1],X=Object(n.useState)(!1),H=Object(o.a)(X,2),J=H[0],K=H[1],$=Object(d.c)((function(e){return e.isLogged})),Q=Object(n.useRef)(),ee=Object(n.useRef)(),te=Object(n.useRef)(),ae=Object(n.useRef)();Object(n.useEffect)((function(){var e=new AbortController,a=h.firestore().collectionGroup("userPosts").where("docId","==",t),n=h.firestore().collectionGroup("userComments").where("post","==",t),c=[];return n.orderBy("date","desc").get().then((function(e){e.docs.forEach((function(e){e&&c.push(e.data())}))})).then((function(){s(c)})),a.get().then((function(e){console.log(e.docs);var t=e.docs[0].data(),a=t.url,n=t.by,c=t.docId,l=t.title,r=t.about,o=t.comments,s=t.tag,i=t.path,m=[a,r,c,l,s,n,i];if(N(m),b(o),S([s]),h.firestore().collection("users").doc(n).get().then((function(e){var t=e.data();if(t){var a=t.profileImage,c=t.firstName,l=t.lastName,r=t.username,o="".concat(c||""," ").concat(l||"");C([o,r,a=a||"none"]),h.firestore().collectionGroup("userFollowing").where("following","==",n).get().then((function(e){var t=e.docs.length;T(t)}))}})).catch((function(e){return alert(e.message)})),$){var u=h.auth().currentUser;if(n===u.uid)_(!0);else h.firestore().collection("following").doc(u.uid).collection("userFollowing").where("following","==",m[5]).get().then((function(e){e.docs.length>0&&K(!0)}))}})).catch((function(e){return alert(e.message)})),function(){console.log("aborting pininfo"),e.abort()}}),[t,$]);var ne=function(e){ae.current.classList.add("hide"),te.current.classList.add("hide"),Q.current.classList.remove("bigger-input"),q("")},ce=function(e){b(e)};return c.a.createElement("div",null,B?c.a.createElement(m.a,{to:"/main"}):"",c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col l1 s6 backward-button-container"},c.a.createElement(u.b,{to:"/main"},c.a.createElement("i",{className:"material-icons right pin-icon"},"keyboard_backspace"))),0!==p.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col l5 m8 pin-image-container"},c.a.createElement("a",{href:"".concat(p[0]),rel:"noopener noreferrer",target:"_blank"},c.a.createElement("img",{src:p[0],alt:"pin",className:"pin-image"}))),c.a.createElement("div",{className:"col l5 info-container"},c.a.createElement("div",{className:"col l12"},c.a.createElement("div",{className:"left"},c.a.createElement("a",{href:"".concat(p[0]),download:!0,rel:"noopener noreferrer",target:"_blank"},c.a.createElement("i",{className:"material-icons pin-icon"},"cloud_download")),!0===A?c.a.createElement("i",{className:"material-icons pin-icon",onClick:function(){if($||A){var e=h.storage().ref().child(p[6]),a=h.firestore().collectionGroup("userPosts").where("docId","==",t),n=h.firestore().collectionGroup("userComments").where("post","==",t);a.get().then((function(e){e.docs.forEach((function(e){e.ref.delete()}))})).then((function(){e.delete(),G(!0)})),n.get().then((function(e){e.docs.forEach((function(e){h.firestore().collectionGroup("userLikes").where("commentId","==",e.data().commentId).get().then((function(e){e.docs.forEach((function(e){e.ref.delete()}))})).then((function(){e.ref.delete().then((function(){}))}))}))}))}else alert("please login to perform this action!")}},"delete"):""),c.a.createElement("div",{className:"right"},c.a.createElement("button",{className:"s-button redbg-color save-btn",onClick:function(){if($&&!A)if(A)alert("Dont Save Your Own Pin!");else{var e=h.auth().currentUser;h.firestore().collection("savedPins").doc(e.uid).collection("userSaved").add({savedOn:h.firestore.Timestamp.fromDate(new Date),savedBy:e.uid,postId:p[2]}).then(alert("saved")).catch((function(e){return console.log(e.message)}))}else alert("Login to perform this action!")}},"Save"))),c.a.createElement("div",{className:"col l12"},c.a.createElement("div",{className:"bold-weight pin-title"},p[3])),0!==O.length?c.a.createElement("div",{className:"col l12 uploaders-info"},"Uploaded By",c.a.createElement("span",null," "),c.a.createElement(u.b,{to:"/user/".concat(O[1])},c.a.createElement("span",{className:"bold-weight name-link"},""===O[0]?O[0]:"Nameless User"))):"",0!==O.length?c.a.createElement("div",{className:"col l12 user-images"},"none"===O[2]?c.a.createElement(u.b,{to:"/user/".concat(O[1])},c.a.createElement("i",{className:"material-icons pin-user-icon"},"account_circle")):c.a.createElement(u.b,{to:"/user/".concat(O[1])}," ",c.a.createElement("img",{src:O[2],alt:"userprofileimage",className:"pin-user-image"})," "),c.a.createElement("div",{className:"user-nf-container"},c.a.createElement("span",{className:"users-name bold-weight name-link"},O[0]),c.a.createElement("div",{className:"users-followers"},P," followers")),c.a.createElement("div",{className:"follow-btn-container"},A?c.a.createElement("i",{className:"material-icons emote"},"tag_faces"):c.a.createElement("div",null,J?c.a.createElement("button",{onClick:function(){if($&&!A){J||alert("Cannot unfollow the same person twice!");var e=h.auth().currentUser;h.firestore().collection("following").doc(e.uid).collection("userFollowing").where("following","==",p[5]).get().then((function(e){e.docs[0].ref.delete().then((function(){K(!1)}))}))}else alert("Please login to perform this action!")},className:"s-button right bold-weight"},"Unfollow"):c.a.createElement("button",{onClick:function(){if($&&!A){J&&alert("Cannot follow the same person twice!");var e=h.auth().currentUser;h.firestore().collection("following").doc(e.uid).collection("userFollowing").add({following:p[5],by:e.uid}).then((function(){K(!0)}))}else alert("Please login to perform this action!")},className:"s-button right bold-weight redbg-color"},"Follow")))):"",c.a.createElement("div",{className:"col l12 comments-container"},c.a.createElement("div",{className:"comments bold-weight"},g," comments",c.a.createElement("i",{className:"material-icons comment-opener",onClick:function(e){var t=e.target;ee.current.classList.contains("hide")?(t.textContent="keyboard_arrow_down",ee.current.classList.remove("hide")):(t.textContent="keyboard_arrow_right",ee.current.classList.add("hide"))}},"keyboard_arrow_right"),c.a.createElement("div",{ref:ee,className:"all-comments hide"},c.a.createElement("div",{className:"comment-input-box"},c.a.createElement("textarea",{className:"comment-text",placeholder:"Enter A Comment",ref:Q,value:Y,onChange:function(e){q(e.target.value)},onClick:function(e){e.target.classList.add("bigger-input"),ae.current.classList.remove("hide"),te.current.classList.remove("hide")}}),c.a.createElement("button",{ref:ae,className:"s-button hide",onClick:ne},"Cancel"),c.a.createElement("button",{ref:te,className:"s-button hide redbg-color",onClick:function(e){if(""!==Y)if($){var a=e.target;a.disabled=!0;var n=h.auth().currentUser,c=h.firestore().collection("comments").doc(n.uid).collection("userComments");c.add({post:t,by:n.uid,comment:Y,date:h.firestore.FieldValue.serverTimestamp(),likes:0}).then((function(e){c.doc(e.id).update({commentId:e.id});var n=g,l=p[5];n+=1,h.firestore().collection("posts").doc(l).collection("userPosts").doc(t).update({comments:n}).then((function(){a.disabled=!1,ne(),b((function(e){return e+1})),e.get().then((function(e){s((function(t){return[].concat(Object(z.a)(t),[e.data()])}))}))}))}))}else alert("Please login to perform this action!");else alert("Please don't try to send an empty comment!")}},"Send"),0!==r.length?c.a.createElement("div",null,r.map((function(e,t){return c.a.createElement(Z,{changeComments:ce,key:t,data:e})}))):"")))))):""),c.a.createElement("div",{className:"center"},"More Like This!"),c.a.createElement("div",{className:""},0!==k.length?c.a.createElement(V,{pref:k}):""))}function ee(){var e=Object(d.c)((function(e){return e.isLogged})),t=Object(n.useState)(!0),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){var t=new AbortController;if(e){var a=[],n=h.auth().currentUser;if(n)h.firestore().collection("following").doc(n.uid).collection("userFollowing").get().then((function(e){e.docs.forEach((function(e){console.log(e.data()),a.push(e.data().following)}))})).then((function(){u(a),r(!1)}))}return function(){console.log("aborting following"),t.abort()}}),[e]),c.a.createElement("div",null,c.a.createElement("div",{className:"".concat(l?"center":"hide")},c.a.createElement("img",{src:E.a,alt:"loading",className:"loaderv2"})),c.a.createElement("div",null,0!==m.length?c.a.createElement(V,{following:m}):c.a.createElement("div",{className:"center"},"No Posts")))}a(37);function te(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),m=i[0],f=i[1],g=Object(n.useState)(!1),b=Object(o.a)(g,2),E=b[0],v=b[1],p=Object(d.c)((function(e){return e.isLogged}));Object(n.useEffect)((function(){var t=new AbortController;if(e.data){if(h.firestore().collection("users").doc(e.data).get().then((function(e){r(e.data())})),p){var a=h.auth().currentUser;if(a)if(a.uid===e.data)f(!0);else h.firestore().collection("following").doc(a.uid).collection("userFollowing").where("following","==",e.data).get().then((function(e){e.docs.length>0&&v(!0)}))}return function(){console.log("aborting userboxes"),t.abort()}}}),[e.data,p]);return c.a.createElement("div",{className:"col l4 m8 s12 user-container center bordered"},c.a.createElement("div",{className:"left user-image-container"},l.profileImage?c.a.createElement(u.b,{to:"/user/".concat(l.username)},c.a.createElement("img",{className:"account-image",src:l.profileImage,alt:"profileimage"})):c.a.createElement(u.b,{to:"/user/".concat(l.username)},c.a.createElement("i",{className:"material-icons account-icon a-i"},"account_circle"))),c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"col l12 users-name bold-weight"},c.a.createElement(u.b,{to:"/user/".concat(l.username)},l.firstName?"".concat(l.firstName," "):"",l.lastName?l.lastName:"")),c.a.createElement("br",null),c.a.createElement("div",{className:"left col l12 about-container"},l.about?"".concat(l.about):"")),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"col l12"},!p||E||m?"":c.a.createElement("button",{className:"s-button refbg-color",onClick:function(){if(p&&!m){E&&alert("Cannot follow the same person twice!");var t=h.auth().currentUser;h.firestore().collection("following").doc(t.uid).collection("userFollowing").add({following:e.data,by:t.uid}).then((function(){v(!0)}))}else alert("Please login to perform this action!")}},"Follow"),p&&E&&!m?c.a.createElement("button",{className:"s-button white-text blackbg-color",onClick:function(){if(p&&!m){E||alert("Cannot unfollow the same person twice!");var t=h.auth().currentUser;h.firestore().collection("following").doc(t.uid).collection("userFollowing").where("following","==",e.data).get().then((function(e){e.docs[0].ref.delete().then((function(){v(!1)}))}))}else alert("Please login to perform this action!")}},"Unfollow"):"",m?c.a.createElement("button",{className:"s-button white-text blackbg-color"},"Follows You"):"")))}function ae(e){var t=Object(m.g)(),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1],i=t.userid;return Object(n.useEffect)((function(){var e=new AbortController,t=h.firestore().collection("users"),a="";return t.where("username","==",i).get().then((function(e){e.forEach((function(e){a=e.id}))})).then((function(){var e=[];h.firestore().collection("following").doc(a).collection("userFollowing").get().then((function(t){t.docs.forEach((function(t){e.push(t.data().following)}))})).then((function(){s(e)}))})),function(){console.log("aborting user following"),e.abort()}}),[i]),c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("div",{className:"center heading-text"},"Following"),c.a.createElement("br",null),0!==r.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row"},r.map((function(e,t){return c.a.createElement(te,{data:e,key:t})})))):c.a.createElement("div",{className:"center"},"None"))}function ne(e){var t=Object(m.g)(),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1],i=t.userid;return Object(n.useEffect)((function(){var e=new AbortController,t=h.firestore().collection("users"),a="";return t.where("username","==",i).get().then((function(e){e.forEach((function(e){a=e.id}))})).then((function(){var e=[];h.firestore().collectionGroup("userFollowing").where("following","==",a).get().then((function(t){t.docs.forEach((function(t){console.log(t.data().by),e.push(t.data().by)}))})).then((function(){s(e)}))})),function(){console.log("aborting user followers"),e.abort()}}),[i]),c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("div",{className:"center heading-text"},"Followers"),c.a.createElement("br",null),0!==r.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row"},r.map((function(e,t){return c.a.createElement(te,{data:e,key:t})})))):c.a.createElement("div",{className:"center"},"None"))}function ce(e){var t=Object(m.g)();return c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("div",{className:"center"},t.searchid),c.a.createElement("br",null),c.a.createElement(V,{pref:[t.searchid]}))}a(91);function le(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1],b=Object(d.c)((function(e){return e.isLogged})),E=Object(d.b)();Object(n.useEffect)((function(){var t=new AbortController,a="";if(b&&(a=h.auth().currentUser)&&h.firestore().collection("users").doc(a.uid).get().then((function(e){var t=e.data();t.mainId=e.id,u(t)})),0!==e.qData.length){var n=h.firestore().collection("users"),c=[];return n.get().then((function(e){return e.docs})).then((function(t){0!==t.length?t.forEach((function(t){var a=t.id,n=t.data(),l=n.firstName,r=n.lastName,o=n.username;"".concat(l||""," ").concat(r||""," ").concat(o," ").concat(a).toLowerCase().includes(e.qData)&&(n.mainId=a,c.push(n))})):r([])})).then((function(){r(c)})),function(){console.log("aborting search for users"),t.abort()}}r([])}),[e.qData,b]);return c.a.createElement("div",{className:"relativized ".concat(!0===e.hidden?"hide":"")},c.a.createElement("div",{className:"user-found-panel blue-bordered"},l.map((function(t,a){return c.a.createElement(c.a.Fragment,{key:a},c.a.createElement("div",{className:"row m-u-container",onClick:function(){E(f(t)),E(g(m)),e.reset()}},c.a.createElement("div",{className:"col l3"},t.profileImage?c.a.createElement("img",{src:t.profileImage,className:"account-image m-account-image",alt:"profileimage"}):c.a.createElement("i",{className:"material-icons account-icon m-account-icon"},"account_circle")),c.a.createElement("div",{className:"col l8 s8 m-account-name"},t.firstName?"".concat(t.firstName," "):"",t.lastName?t.lastName:""),c.a.createElement("div",{className:"col l8 s7 m-account-username"},t.username)))}))))}function re(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),m=i[0],u=i[1],d=Object(n.useRef)(),f=Object(n.useRef)(),g=function(){d.current.classList.add("hide"),f.current.classList.remove("blue-bordered"),r(""),u(!0)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-input-container",ref:f},c.a.createElement("i",{className:"material-icons search-icon"},"search"),c.a.createElement("input",{onClick:function(){d.current.classList.remove("hide"),f.current.classList.add("blue-bordered"),u(!1)},onChange:function(e){r(e.target.value)},type:"text",placeholder:"Search",value:l}),c.a.createElement("button",{onClick:g,ref:d,className:"s-button blackbg-color hide white-text"},"X"),c.a.createElement("br",null),c.a.createElement(le,{qData:l,hidden:m,reset:g})))}function oe(){var e=Object(d.c)((function(e){return e.target}));return c.a.createElement("div",{className:"m-target-info"},c.a.createElement("div",null,e[0].profileImage?c.a.createElement("img",{src:e[0].profileImage,alt:"profileimage",className:"account-image m-account-image move-up1"}):c.a.createElement("i",{className:"material-icons m-account-icon move-up1"},"account_circle")),c.a.createElement("div",null,c.a.createElement("div",{className:"m-name"},e[0].firstName?"".concat(e[0].firstName," "):"",e[0].lastName?"".concat(e[0].lastName," "):"")))}function se(){var e=Object(d.c)((function(e){return e.isLogged})),t=Object(d.c)((function(e){return e.target})),a=Object(n.useState)(""),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(d.b)();return c.a.createElement("div",{className:"messenger-input m-flexed"},c.a.createElement("div",null,c.a.createElement("input",{type:"text",value:r,onChange:function(e){s(e.target.value)},className:"m-input",placeholder:"Send A Message"})),c.a.createElement("button",{className:"s-button"},c.a.createElement("i",{className:"material-icons m-send-icon",onClick:function(){if(""!==r)if(e){var a=h.auth().currentUser,n=t[0].mainId,c=a.uid<n?"chat_".concat(a.uid,"_").concat(n):"chat_".concat(n,"_").concat(a.uid),l=h.firestore().collection("chatrooms").doc(c),o=!1;l.collection("roomInfo").doc("mainInfo").get().then((function(e){e.data()?l.collection("roomInfo").doc("mainInfo").set({lastMessageBy:a.uid,lastSeenBy:a.uid,lastMessageDate:h.firestore.FieldValue.serverTimestamp()},{merge:!0}):(o=!0,l.collection("roomInfo").doc("mainInfo").set({members:[a.uid,n],roomName:c,created:h.firestore.FieldValue.serverTimestamp(),lastMessageBy:a.uid,lastSeenBy:a.uid,lastMessageDate:h.firestore.FieldValue.serverTimestamp()},{merge:!0}))})).then((function(){})),l.collection("roomInfo").doc("lastMessage").set({by:a.uid,to:n,message:r,date:h.firestore.FieldValue.serverTimestamp()},{merge:!0}),l.collection("messages").add({by:a.uid,to:n,message:r,date:h.firestore.FieldValue.serverTimestamp()}).then((function(){o?i({type:"RESETTARGET"}):s("")})).catch((function(e){return console.log(e.message)}))}else alert("Please login to perform this action!");else alert("Cannot send empty messages!")}},"send")))}function ie(e){var t=Object(d.c)((function(e){return e.isLogged})),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1],i=Object(n.useState)([]),m=Object(o.a)(i,2),u=m[0],b=m[1],E=Object(n.useState)([]),v=Object(o.a)(E,2),p=v[0],N=v[1],w=Object(d.b)(),j=Object(n.useState)(!1),O=Object(o.a)(j,2),C=O[0],y=O[1];Object(n.useEffect)((function(){var a=new AbortController;if(t){var n=h.auth().currentUser;if(n){h.firestore().collection("users").doc(n.uid).get().then((function(e){var t=e.data();t.mainId=e.id,N(t)}));for(var c=e.data,l=c.roomName,r=c.members,o=h.firestore().collection("chatrooms").doc(l).collection("roomInfo").doc("lastMessage"),i=h.firestore().collection("users"),m="",u=0;u<r.length;u++)if(r[u]!==n.uid){m=r[u];break}""===m&&(m=r[0]),o.get().then((function(e){var t=e.data();i.doc(m).get().then((function(e){var a=e.id,c=e.data(),l=c.firstName,r=c.lastName;c.fullName="".concat(l||""," ").concat(r||""),c.mainId=a,s(c),t.by===n.uid?t.mainBy="you":t.mainBy="".concat(c.firstName?c.firstName:""," ").concat(c.lastName?c.lastName:""),b(t),y(!0)}))}))}}return function(){console.log("aborting room boxes"),a.abort()}}),[e.data,t]);return c.a.createElement("div",{className:"row room-container",onClick:function(){var t,a;t=e.data,a=r,!1!==C&&(w(function(e){return{type:"SET_ROOM",payload:e}}(t)),w(f(a)),w(g(p)))}},c.a.createElement("div",{className:"col l2"},r.profileImage?c.a.createElement("img",{src:r.profileImage,className:"account-image",alt:"profileimage"}):c.a.createElement("i",{className:"material-icons account-icon rounded-icon bordered"},"account_circle")),c.a.createElement("div",{className:"flex-columned"},c.a.createElement("div",{className:"col l10 "},r.fullName?c.a.createElement("div",{className:"room-name"},r.fullName):""),c.a.createElement("div",{className:"col l12 room-last-message"},u&&r?c.a.createElement("div",null,c.a.createElement("span",{className:"main-by-name"},u.mainBy)," said : ",u.message):"")))}function me(){var e=Object(d.c)((function(e){return e.isLogged})),t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){var t=new AbortController,a=function(){};if(e){var n=h.auth().currentUser;if(n){var c=h.firestore().collectionGroup("roomInfo").where("members","array-contains",n.uid);a=c.onSnapshot((function(e){var t=[],a=e.docs;a.map((function(e,n){return e.metadata.hasPendingWrites||(t.push(e.data()),a[n+1]||r(t)),0}))}))}}return function(){console.log("unsubscribing from chat rooms"),a(),t.abort()}}),[e]),c.a.createElement("div",null,c.a.createElement(c.a.Fragment,null,l.map((function(e,t){return c.a.createElement(ie,{key:t,data:e})}))))}function ue(e){var t=e.data,a=Object(d.c)((function(e){return e.user})),l=Object(d.c)((function(e){return e.target})),r=Object(n.useState)(!1),s=Object(o.a)(r,2),i=s[0],m=s[1],u=Object(n.useState)(""),f=Object(o.a)(u,2),g=f[0],b=f[1],E=Object(n.useRef)();return Object(n.useEffect)((function(){var e=new AbortController;if(a.mainId===t.by){var n=a.profileImage?a.profileImage:"";m(!0),b(n)}else{var c=l[0].profileImage?l[0].profileImage:"";b(c),m(!1)}return function(){console.log("aborting chat-messageboxes"),e.abort()}}),[a,t,l]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:E,className:"flex-columned ".concat(i?"fix-right":""," message-box")},i?"":c.a.createElement(c.a.Fragment,null,""!==g?c.a.createElement("img",{src:g,className:"account-image chat-image",alt:"userphoto"}):c.a.createElement("i",{className:"material-icons account-icon chat-image"},"account_circle")),c.a.createElement("div",{className:"message-text-box"},t.message)))}function de(){var e=Object(d.c)((function(e){return e.room})),t=Object(d.c)((function(e){return e.isLogged})),a=Object(n.useState)([]),l=Object(o.a)(a,2),r=l[0],s=l[1];return console.log(e),Object(n.useEffect)((function(){var a=new AbortController;if(e.roomName){var n=function(){};if(t){var c=e.roomName,l=h.firestore().collection("chatrooms").doc(c).collection("messages").orderBy("date","desc");n=l.onSnapshot((function(e){var t=e.docs,a=[];t.map((function(e,n){return e.metadata.hasPendingWrites||(a.push(e.data()),t[n+1]||s(a)),0}))}))}return function(){console.log("unsubscribing from chat data"),n(),a.abort()}}}),[e,t]),c.a.createElement("div",{className:"chats-container"},r.length>0?c.a.createElement(c.a.Fragment,null,r.map((function(e,t){return c.a.createElement(ue,{data:e,key:t})}))):"")}function fe(e){var t=Object(d.c)((function(e){return e.target})),a=Object(d.c)((function(e){return e.room}));return c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("div",{className:"center"},"Messages"),c.a.createElement("div",{className:"m-main-container"},c.a.createElement("div",{className:"full-height m-search-container"},c.a.createElement(re,null),c.a.createElement(me,null)),c.a.createElement("div",{className:"full-height full-width relativized m-chat-container"},t.length>0?c.a.createElement(oe,null):"",t.length>0&&a?c.a.createElement(de,null):"",t.length>0?c.a.createElement(se,null):"")),c.a.createElement("div",{className:"center card-panel teal lighten-2"},"Chat is buggy..."))}var ge=a(41),be=a.n(ge);a(92);function Ee(){return c.a.createElement("div",null,c.a.createElement("div",{className:"center card-panel teal"},c.a.createElement("div",{className:"a-about-text"},"This is a purely educational project made for fun, to test my skills and as my final project for theOdinProject."),c.a.createElement("br",null),c.a.createElement("div",{className:"a-about-text"},"This project is not related to Pinterest in any way."),c.a.createElement("br",null),c.a.createElement("div",{className:"center"},c.a.createElement("a",{href:"#somelink",target:"_blank",rel:"noopener noreffer"},c.a.createElement("img",{src:be.a,className:"logo logo-bigger",alt:"github-repository"}))),c.a.createElement("br",null),c.a.createElement("div",{className:"a-footer-text"},"If Interested you can visit the github-repo of this project by clicking on the icon above."),c.a.createElement("div",{className:"a-footer-text"},"Thanks for visiting!.")),c.a.createElement("br",null),c.a.createElement("div",{className:"center"},c.a.createElement(u.b,{to:"/"},c.a.createElement("i",{className:"material-icons a-back-key"},"keyboard_backspace"))))}var he=function(){var e=Object(d.b)();return Object(n.useEffect)((function(){var t=new AbortController;return h.auth().onAuthStateChanged((function(t){t?(console.log("login"),e({type:"LOG_IN"}),e({type:"SAVE",payload:t.uid})):(console.log("logout"),e({type:"LOG_OUT"}),e({type:"RESET"}))})),function(){console.log("aborting app"),t.abort()}}),[e]),c.a.createElement(u.a,null,c.a.createElement(m.d,null,c.a.createElement(m.b,{exact:!0,path:"pinterest-clone/"},c.a.createElement(y,null),c.a.createElement(I,null)),c.a.createElement(m.b,{exact:!0,path:"/about"},c.a.createElement(Ee,null)),c.a.createElement(m.b,{path:"/"},c.a.createElement(A,null),c.a.createElement("br",null),c.a.createElement(m.b,{exact:!0,path:"/main"},c.a.createElement($,null)),c.a.createElement(m.b,{exact:!0,path:"/main/settings"},c.a.createElement(M,null)),c.a.createElement(m.b,{exact:!0,path:"/user/:userid"},c.a.createElement(q,null)),c.a.createElement(m.b,{exact:!0,path:"/user/:userid/following"},c.a.createElement(ae,null)),c.a.createElement(m.b,{exact:!0,path:"/user/:userid/followers"},c.a.createElement(ne,null)),c.a.createElement(m.b,{exact:!0,path:"/pin/:pinid"},c.a.createElement(Q,null)),c.a.createElement(m.b,{exact:!0,path:"/create-a-pin"},c.a.createElement(K,null)),c.a.createElement(m.b,{exact:!0,path:"/search/:searchid"},c.a.createElement(ce,null)),c.a.createElement(m.b,{exact:!0,path:"/messages"},c.a.createElement(fe,null)),c.a.createElement(m.b,{exact:!0,path:"/following"},c.a.createElement(ee,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(20),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return!0;case"LOG_OUT":return!1;default:return e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE":return t.payload;case"RESET":return"";default:return e}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTARGET":return[t.payload];case"RESETTARGET":return[];default:return e}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM":return t.payload;case"RESET_ROOM":return[];default:return e}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"RESET_USER":return[];default:return e}},Ce=Object(ve.b)({isLogged:pe,userID:Ne,target:we,room:je,user:Oe}),ye=Object(ve.c)(Ce,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(c.a.createElement(d.a,{store:ye},c.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[42,1,2]]]);
//# sourceMappingURL=main.237a6178.chunk.js.map